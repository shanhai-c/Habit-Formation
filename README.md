# Habit-Formation（习惯养成）项目文档
## 一、关于项目
### 项目名称
Habit-Formation（习惯养成）

### 项目概述
Habit-Formation 是一款基于鸿蒙（HarmonyOS）系统开发的习惯养成类应用，旨在帮助用户建立、追踪和管理日常习惯，通过可视化的统计数据、打卡激励机制，提升用户坚持习惯的动力。应用以简洁美观的UI设计、流畅的交互体验为核心，覆盖“今日习惯打卡、全习惯管理、多维度统计分析”三大核心场景，支持习惯分类、目标设置、连续打卡记录、分类统计等功能，满足用户从习惯创建到长期追踪的全流程需求。

## 二、应用设计
### 1. 需求分析
#### （1）用户核心需求
- 便捷创建自定义习惯，支持分类（健康/学习/工作/生活）、目标天数设置；
- 每日习惯打卡，自动记录连续坚持天数，提供打卡反馈；
- 可视化查看习惯数据（今日完成数、总习惯数、完成率、分类统计等）；
- 区分“今日习惯”和“全部习惯”，聚焦当日任务，高效管理习惯列表；
- 接收习惯提醒、查看通知，个性化设置应用偏好。

#### （2）功能需求
| 模块         | 核心功能点                                                                 |
|--------------|----------------------------------------------------------------------------|
| 首页         | 顶部用户信息/通知/设置、日期卡片（周数+今日完成数据）、标签页切换（今日/全部/统计） |
| 习惯管理     | 习惯添加（名称/分类/目标天数）、打卡（连续天数计算）、删除、详情查看         |
| 数据统计     | 概览统计（总习惯/今日完成/最长连续/完成率）、习惯排行、分类完成率统计       |
| 辅助功能     | 通知中心、设置页面、时间问候语、空状态提示                                 |

#### （3）非功能需求
- UI：符合鸿蒙设计规范，视觉简洁，层次分明，支持响应式布局；
- 交互：操作反馈及时（如打卡Toast、按钮按压动画），页面切换流畅；
- 性能：数据加载无卡顿，本地数据缓存（模拟），操作响应≤100ms。

### 2. 项目结构
基于鸿蒙ArkTS工程规范，核心目录结构如下：
```
Habit-Formation/
├── src/main/ets/
│   ├── pages/                  // 页面目录
│   │   ├── MainPage.ets        // 首页（核心页面）
│   │   ├── HabitDetailPage.ets // 习惯详情页
│   │   ├── NotificationPage.ets// 通知页面
│   │   ├── SettingsPage.ets    // 设置页面
│   ├── HabitTypes.ets          // 类型定义文件（HabitData/StatisticsData等）
│   ├── entryability.ets        // 应用入口
├── src/main/resources/         // 资源目录
│   ├── media/                  // 图片资源（logo/notification/settings等）
│   ├── base/                   // 字符串/颜色/尺寸等配置
```

### 3. 功能设计
#### （1）核心数据类型设计（对应HabitTypes.ets）
```typescript
// 习惯基础信息
export interface HabitData {
  id: number;
  name: string;
  description: string;
  icon: string;
  category: string; // 健康/学习/工作/生活
  targetDays: number; // 目标坚持天数
  currentStreak: number; // 当前连续天数
  completed: boolean; // 今日是否完成
  isToday: boolean; // 是否为今日习惯
  reminder: string; // 提醒时间
  createdAt: Date; // 创建时间
  lastCheckInDate?: Date; // 最后打卡时间
  totalCheckIns: number; // 总打卡次数
}

// 统计数据
export interface StatisticsData {
  totalHabits: number; // 总习惯数
  completedToday: number; // 今日完成数
  totalCheckIns: number; // 总打卡数
  currentStreak: number; // 最长连续天数
  monthlyCompletionRate: number; // 月度完成率
}

// 分类颜色配置
export interface CategoryColorConfig {
  primary: string; // 主色
  background: string; // 背景色
  icon: string; // 图标色
}

// 分类统计数据
export interface CategoryStatData {
  category: string;
  count: number; // 该分类习惯总数
  completed: number; // 已完成数
  completionRate: number; // 完成率
  color: string; // 进度条颜色
}
```

#### （2）核心功能模块设计
| 模块         | 设计要点                                                                 |
|--------------|--------------------------------------------------------------------------|
| 习惯打卡逻辑 | 1. 校验今日是否已打卡；2. 对比最后打卡日期，判断是否连续（昨日打卡则+1，否则重置为1）；3. 更新打卡状态和统计数据 |
| 统计计算     | 1. 今日完成数：筛选isToday=true且completed=true的习惯数；2. 分类完成率：(分类已完成数/分类总数)*100；3. 最长连续：取所有习惯currentStreak的最大值 |
| 添加习惯     | 1. 校验名称非空；2. 按分类自动匹配图标；3. 默认今日习惯，初始连续天数0；4. 更新习惯列表和统计数据 |
| 交互体验     | 1. 悬浮按钮按压缩放动画；2. 打卡/添加/删除的Toast提示；3. 标签页切换的下划线动效；4. 遮罩层点击关闭弹窗 |

## 三、功能展示
### 1. 首页核心布局
#### （1）顶部导航栏
- 展示用户头像/昵称，根据当前时段自动切换问候语（凌晨好/早上好/上午好等）；
- 集成通知按钮（未读红点提示）、设置按钮，点击跳转对应页面；
- 隐藏式TextClock监听小时变化，自动更新问候语。

#### （2）日期卡片
- 显示当前日期+本周周数，核心数据可视化（今日完成数、总习惯数、月度完成率）；
- 卡片采用圆角+阴影设计，区分视觉层次，提升质感。

#### （3）标签页切换
- 支持“今日习惯/全部习惯/统计”三标签切换，选中态下划线高亮；
- 今日习惯：仅展示isToday=true的习惯，空状态显示引导提示；
- 全部习惯：支持分类筛选（全部/健康/学习/工作/生活），横向滚动筛选栏。

### 2. 习惯卡片
- 左侧：习惯图标（按分类匹配颜色背景）+ 名称+提醒时间；
- 右侧：今日未完成显示“打卡”按钮，已完成显示“已完成”标签；
- 底部：坚持天数/目标天数文案 + 进度条（按(currentStreak/targetDays)*100计算宽度）；
- 点击卡片跳转习惯详情页，支持删除操作（弹窗确认）。

### 3. 添加习惯弹窗
- 弹窗居中显示，遮罩层点击可关闭；
- 支持输入习惯名称、选择分类（健康/学习/工作/生活）、选择目标天数（7/21/30/60/90）；
- 校验名称非空，添加成功后清空输入框，关闭弹窗并提示。

### 4. 统计页面
#### （1）统计概览
- 2x2网格布局，展示核心数据（总习惯、今日完成、最长连续、完成率）；
- 每个数据卡片独立圆角+阴影，按数据类型匹配主题色（蓝色/绿色/黄色/紫色）。

#### （2）习惯坚持排行
- 按连续天数降序展示TOP5习惯，前3名显示奖牌表情（🥇/🥈/🥉）；
- 展示习惯名称/分类/目标天数/连续天数，点击可查看详情。

#### （3）分类统计
- 按分类展示习惯总数、完成率进度条、已完成/总数文案；
- 进度条颜色匹配分类主色（健康-绿色、学习-紫色、工作-蓝色、生活-黄色）。

### 5. 核心交互场景
| 场景         | 操作流程                                                                 |
|--------------|--------------------------------------------------------------------------|
| 习惯打卡     | 点击今日习惯卡片的“打卡”按钮 → 校验未打卡 → 计算连续天数 → 更新状态 → 提示“打卡成功！已连续X天” |
| 添加习惯     | 点击右下角悬浮按钮 → 打开弹窗 → 输入名称/选分类/选目标天数 → 点击添加 → 提示“习惯添加成功” |
| 查看统计     | 切换至“统计”标签 → 自动计算并展示概览数据/排行/分类统计 → 滚动查看全部内容 |
| 删除习惯     | 进入习惯详情页 → 点击删除按钮 → 弹窗确认 → 删除并更新统计数据 → 提示“习惯已删除” |

### 6. 视觉设计亮点
- 配色：主色为蓝色（#3B82F6），分类色差异化（健康-绿、学习-紫、工作-蓝、生活-黄），背景以浅灰（#F8FAFC）+ 白色（#FFFFFF）为主，视觉清爽；
- 布局：统一使用圆角（16px/12px/8px）+ 阴影，符合鸿蒙轻拟物设计风格；
- 响应式：适配不同屏幕尺寸，关键区域使用layoutWeight填充剩余空间，Scroll组件确保内容可滚动。

以上功能均已在代码中实现，核心逻辑（打卡、统计计算、交互反馈）完整，UI布局贴合鸿蒙设计规范，满足用户习惯养成的全流程需求。
